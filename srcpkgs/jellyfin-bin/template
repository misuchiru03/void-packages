# Template file for 'jellyfin-bin'
pkgname=jellyfin-bin
version=10.9.1
revision=1
archs="x86_64"
short_desc="Free software media system"
maintainer="Alex Childs <misuchiru03+void@gmail.com>"
license="GPL-2.0"
homepage="https://jellyfin.org"
distfiles="https://repo.jellyfin.org/files/server/linux/latest-stable/amd64/jellyfin_${version}-amd64.tar.gz"
checksum=5250133a669a6c9c06d65cf468fa7f6aa22c2f8d8e1dbd4c63f3af1e646fa103

system_accounts="_jellyfin _jellyfin"

make_dirs="
 /var/log/jellyfin 0755 _jellyfin _jellyfin
 /var/cache/jellyfin 0755 _jellyfin _jellyfin
 /usr/lib/jellyfin/config 0755 _jellyfin _jellyfin
 /var/cache/jellyfin/transcodes 0755 _jellyfin _jellyfin
 /usr/lib/jellyfin/data 0755 _jellyfin _jellyfin"

do_install() {
	vmkdir usr/lib/jellyfin/bin
	vcopy "*" usr/lib/jellyfin/bin

	vmkdir usr/bin
	ln -sf "/usr/lib/jellyfin/bin/jellyfin" ${PKGDESTDIR}/usr/bin/jellyfin
	ln -sf "/usr/lib/jellyfin/bin/createdump" ${PKGDESTDIR}/usr/bin/createdump

	vsv jellyfin
}
