# Template file for 'bitwarden-cli'
pkgname=bitwarden-cli
version=1.16.0
revision=1
wrksrc="cli-${version}"
makedepends="nodejs"
depends="nodejs"
short_desc="Bitwarden password manager command line"
maintainer="Alex Childs <misuchiru03+void@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://bitwarden.com"
distfiles="https://github.com/bitwarden/cli/archive/v${version}.tar.gz"
checksum=b4df7122e99281f63c6666911158299a33c3690a43667aab8436e0dc59089702

do_install() {
	vmkdir usr/bin
	vmkdir usr/lib/node_modules
	npm -g install @bitwarden/cli
	cp -R "${XBPS_MASTERDIR}/usr/lib/node_modules/@bitwarden" "${DESTDIR}/usr/lib/node_modules"
	ln -s "/usr/lib/node_modules/@bitwarden/cli/build/bw.js" "${DESTDIR}/usr/bin/bw"
}
