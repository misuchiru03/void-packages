# Template file for 'metasploit-framework'
pkgname=metasploit-framework
version=5.0.29+20190611142845
revision=1
archs="x86_64"
short_desc="Security testing framework"
maintainer="Alex Childs <misuchiru03+void@gmail.com>"
license="BSD-3-Clause"
homepage="https://rapid7.com"
distfiles="http://downloads.metasploit.com/data/releases/metasploit-framework/apt/pool/main/m/metasploit-framework/metasploit-framework_${version}~1rapid7-1_amd64.deb"
checksum=6da0b7b69c126f6628d4c7f6c3418ee21d518acc03392babf3becedb2c4464fb
nopie=yes
nostrip=yes
noverifyrdeps=yes

do_extract() {
	ar x ${XBPS_SRCDISTDIR}/${pkgname}-${version}/${pkgname}_${version}~1rapid7-1_amd64.deb
	tar xf data.tar.gz
	rm -f opt/metasploit-framework/bin/msfupdate
}

do_install() {
	cp -r opt ${DESTDIR}
	for i in opt/metasploit-framework/bin/*; do
		vbin ${i}
	done
}

post_install() {
	vlicense opt/metasploit-framework/LICENSE
}
