# Template file for 'minecraft-launcher'
pkgname=minecraft-launcher
version=2.1.17627
revision=1
wrksrc="minecraft-launcher"
archs="x86_64"
build_style=fetch
hostmakedepends="lynx tar"
depends="virtual?java-runtime"
short_desc="Official Minecraft Launcher"
maintainer="Alex Childs <misuchiru03+void@gmail.com>"
license="proprietary"
homepage="https://www.minecraft.net"
distfiles="https://launcher.mojang.com/download/linux/x86_64/minecraft-launcher_${version}.tar.gz"
checksum=c0ab8ae65951c1edaf7e45ae8a83bb8ee33727e089a9f55774dde90bbc97f213
nopie=yes
restricted=yes
repository=nonfree
_license_site="https://account.mojang.com/documents/minecraft_eula"

do_extract() {
	tar zxf ${XBPS_SRCDISTDIR}/${pkgname}-${version}/${pkgname}_${version}.tar.gz
}

do_install() {
	vmkdir opt/
	cp -r * ${DESTDIR}/opt/${pkgname}

	lynx -dump ${_license_site} > LICENSE
	vlicense LICENSE

	vmkdir usr/bin
	ln -sf /opt/${pkgname}/${pkgname} ${DESTDIR}/usr/bin/minecraft
}
